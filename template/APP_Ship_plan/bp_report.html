<style>
    .ui-widget.ui-widget-content {
        border: 1px solid #aed0ea;
    }
    .table-heading tr td{
        border-top:none;
    }

    .row-head{
        margin-bottom: 0px;
    }
    h5{
        margin-bottom: 0px; 
    }
    .alert-info{
        border:solid 1px #17a2b8 ;
        border-radius: 0px;
    }
    .table-heading tr td{
        color:black;

    }
    .td-label{
        text-align: right;          
        color:black;
    }
    .td-centent{
        text-align: center;
        color:black;
    }
    .table-content thead tr th{
        text-align: center;
        padding-top:2px;
        padding-bottom:2px;
        background-color: #FFFFFF;
        color:black;
        border:solid 1px #666;
    }
    .btn-filter{
        height:32px;
        border-radius: 0px;
    }
    .col-filter{
        padding-right: 0px;
    }
    .tab-sub-head-item{
        width:15%;
    }
    .tab-sub-head-qty{
        width:10%;
        text-align: center;
    }
</style>
<!-- Trigger the modal with a button -->


<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">

                <h5 class="modal-title">Report Filter</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">

                <form name="form1" id="form1" method="post" >
                    <input type="hidden" name="formAction" value="submit">

                    <div class="alert alert-info">
                        <div class="row">
                            <div class="col-2 text-right  col-label">
                                From Date
                            </div>
                            <div class="col-4 text-left">
                                <input style="padding-right:2px;" type='text' class="form-control" name="fromDate" id="fromDate" value="{fromDate}" />
                            </div>
                            <div class="col-2 text-right col-label">
                                To Date
                            </div>
                            <div class="col-4 text-left">
                                <input style="padding-right:2px;" type='text' class="form-control" name="toDate" id="toDate" value="{toDate}" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-2 text-right  col-label">
                                ชื่อเรือ
                            </div>
                            <div class="col-4 text-left">
                                <select class="form-control" name="selBoat" id="selBoat">
                                    {boatLists}
                                </select>
                            </div>
                            <div class="col-2 text-right col-label">
                                ทะเบียนเรือ
                            </div>
                            <div class="col-4 text-left">
                                <input style="padding-right:2px;" type='text' class="form-control" name="boatLighterNo" id="boatLighterNo" value="{boatLighterNo}" readonly/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 text-center">
                                <button type="submit" name="btnSub" class="btn btn-info" id="btnSub" ><i class="fa fa-print"></i> Report </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div class="container" style="margin-top:30px;">
    <div class="row rowheader" >
        <br>
        <div class="col-6 text-left col-back" >
            <h5><a href="?bp_lists" class="btn btn-info btn-back"><i class="fa fa-chevron-left"></i></a> <i class="fa fa-bar-chart"></i>&nbsp;&nbsp;BoatPlan Report  

            </h5>

        </div>
        <div class="col-6 text-right col-filter" >
            <button type="button" class="btn btn-info btn-sm btn-filter" data-toggle="modal" data-target="#myModal"><i class="fa fa-search"></i> Filter Report</button>
             <button type="button" class="btn btn-default btn-sm btn-filter"  id="btnPrint"><i class="fa fa-print"></i> Print </button>
        </div>
    </div>
    <div class="row">
        <table class="table table-heading">
            <tr>
                <td width="20%" class="td-label" > วันที่เริ่ม </td>
                <td width="30%" class="td-content">{tableFromDate} </td>
                <td width="20%" class="td-label">วันที่สิ้นสุด </td>
                <td width="30%" class="td-content"> {tableToDate} </td>
            </tr>
            <tr>
                <td width="20%" class="td-label"> ชื่อเรือ </td>
                <td width="30%" class="td-content">{tableBoatMV} </td>
                <td width="20%" class="td-label">ทะเบียนเรือ </td>
                <td width="30%" class="td-content"> {tableBoatLighterNo} </td>
            </tr>
        </table>
        <table class="table table-content table-bordered" >
            <thead>
                <tr>
                    <th colspan="2">ท้ายเรือ</th>
                    <th colspan="2">กลางท้าย</th>
                    <th colspan="2">กลางหัว</th>
                    <th colspan="2">หัวเรือ</th>
                </tr>
                <tr>
                    <th class="tab-sub-head-item">Item</th>
                    <th class="tab-sub-head-qty">QTY.Bundles</th>
                    <th class="tab-sub-head-item">Item</th>
                    <th class="tab-sub-head-qty">QTY.Bundles</th>
                    <th class="tab-sub-head-item">Item</th>
                    <th class="tab-sub-head-qty">QTY.Bundles</th>
                    <th class="tab-sub-head-item">Item</th>
                    <th class="tab-sub-head-qty">QTY.Bundles</th>
                </tr>
            </thead>
            <tbody>
                {reportContent}
            </tbody>
            <tr>
                <td align="right">Total Qty.Bundles</td>
                  <td align="right">{TotalPos1}</td>
                   <td align="right">Total Qty.Bundles</td>
                  <td align="right">{TotalPos2}</td>
                   <td align="right">Total Qty.Bundles</td>
                  <td align="right">{TotalPos3}</td>
                   <td align="right">Total Qty.Bundles</td>
                  <td align="right">{TotalPos4}</td>
            </tr>
            <tr>
                <td colspan="7" align="right">Total</td>
                 <td align="right">{TotalAll}</td>
            </tr>
        </table>

    </div>
</div>

<script>
    $(function () {
        $("#fromDate").datetimepicker({
            dateFormat: 'yy-mm-dd',
            timeFormat: "HH:mm:ss"
        });
        $("#toDate").datetimepicker({
            dateFormat: 'yy-mm-dd',
            timeFormat: "HH:mm:ss"
        });
    });

    $('#selBoat').on('change', function () {
        var idRun = $(this).val();
        $.post("module/ajax/data_boat.php", {
            "idRun": idRun, 
            "field": "ln"
        }, function (data) {
            $("#boatLighterNo").val(data);
        }, 'html');
    });
    $("#btnSub").click(function(){
        $("#form1").attr("action","?bp_report") ;
        $("#form1").submit();
    });
    $("#btnPrint").click(function(){
        var BoatId = 0 ;
        var FromDate = "" ;
        var ToDate = "" ;
        BoatId = $("#selBoat").val();
        FromDate = $("#fromDate").val();
        ToDate = $("#toDate").val();
         window.open("./module/bp_report_print.php?BoatId="+BoatId+"&fromDate="+FromDate+"&toDate="+ToDate, "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,width=1000,height=700") ;
       
    });
    
</script>
